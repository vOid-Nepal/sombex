<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width initial-scale=1">
    <meta name="theme-color" content="#b22222">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" integrity="sha256-gvEnj2axkqIj4wbYhPjbWV7zttgpzBVEgHub9AAZQD4=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css" integrity="sha256-zmfNZmXoNWBMemUOo1XUGFfc0ihGGLYdgtJS3KCr/l0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="main.css">
    <title>Coming Soon</title>
</head>
<body>

    <main class="main-wrapper">
        <section class="first">
            <div class="coming-soon">
                <div>
31
                    <!-- <div class="post-item">
32
                    <a href="">
33
                    <div class="bg-img" style='background-image: url("https://1.bp.blogspot.com/-djkWPiOHL-4/WifCBmRtEqI/AAAAAAAAACg/85UPzpseSl4uvNVWQdFGTaaXd9T7cr-ggCK4BGAYYCw/s1600/IMG_20171206_114443.jpg");'></div>
34
                    <h6>blaa blaa bla</h6>
35
                    <span>desc Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptate, reprehenderit doloremque, debitis ratione ab facilis accusamus nihil fu</span>
36
                    </a>
37
                    </div> -->
                    <img src="https://1.bp.blogspot.com/-uzk6mggOlyg/Wfv2avQd_4I/AAAAAAAAAVU/fSSR7tiGicYqdtRXon9-wlvSIL0tTNycgCK4BGAYYCw/s1600/sombex.png" alt="main-logo">
                    <p>We will be live soon. Meanwhile you can check our <a href="#blog" style="text-decoration: underline"> blog</a>.</p>
                    <div class="social">
                        <a href="https://www.facebook.com/sombextechblog/"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.youtube.com/channel/UCmcXVCxNwW5rp-KAc8qadbQ"><i class="fab fa-youtube"></i></a>
                        <a href="mailto:admin@sombex.com"><i class="fa fa-envelope"></i></a>
                    </div>
                </div>                
            </div></section>
        <section id="blog" class="second">
            <div>
                <div class="explore">Explore</div>
                <div class="blog-container">
                    <div class="post-item"><a href="http://blog.sombex.com">Visit Our Blog </a></div>
                </div>
            </div>
        </section>
    </main>


    <script>
        // debugger;
        // document.body.innerHTML = f();
        rec = document.getElementsByClassName('blog-container').item(0);
        rec.innerHTML = f() + rec.innerHTML;
    
        function f(from = 50, tot = 3, randomize = true) {
    
            // This method may result duplicate content upon randomization, have no time to solve it
    
            let url = 'https://www.googleapis.com/blogger/v3/blogs/1842979261561211771/posts?key=AIzaSyD3t4cjcfI4IAFTyvoMid7SeWHxXbQaf1s';
            let ls = [];
            let a = 1;
            let token = '';
            let html = '';
    
            if(!randomize) from = tot; // If randomize is off we just need to extract the top only..
    
            // while (true)
            while (a < from)
            {
                let p = f2(token);
                let list = p['items'];
                for(let x in list){
                    ls.push(list[x]);
                    a++;
                }
    
                if(p.hasOwnProperty('nextPageToken'))
                   token = p['nextPageToken'];
                else
                    break; // Break if total post is less than we want here to select from
            }
    
            let len = ls.length;
    
            if(len < tot) tot = len;  // Prevent array index out of bound(if it was Array), Prevents Not Found Exception
    
            for(let i = 0; i < tot; i++ )
                html += f1(ls[(randomize) ? parseInt(getRandomArbitrary(0, len)) : i]); // Randomize if its true else return i
            return html;
    
    
            function f2(token = '') {
                    let xhttp = new XMLHttpRequest();
                    xhttp.open("GET", url + (token !== '' ? '&pageToken=' + token : '') , false);
                    xhttp.send();
                    return JSON.parse(xhttp.responseText);
            }
    
            function f1(item) {
                if(item.hasOwnProperty('kind') && item['kind'] !== "blogger#post") return '';
                let h = '<div class = "post-item">';
                let doc = new DOMParser().parseFromString(item['content'], 'text/html');
                let src = doc.body.getElementsByTagName('img').item(0);
                // console.log(item);
                h +=  '<a href = "' + item['url'] + '">                         <div class="bg-img" style=\'background-image: url("' + src.getAttribute('src')+ '");\'></div>';
                h += '<h6>' + item["title"] +  '</h6>';
                h += '<span >' + doc.body.innerText.substr(1, 100) + '</span>';
    //            h.getAttribute('a');
    //			console.log(doc);
                return h + '</a></div>';
            }
    
            function getRandomArbitrary(min, max) {
                return Math.random() * (max - min) + min;
            }
        }
    </script>
</body>
</html>
